
@model PalestreGoGo.WebAPIModel.ClienteViewModel;

@{
    //ViewData["Title"] = $"Home Page Cliente {Model.Nome}";
    Layout = "_LayoutClienti";
}

<div>
    <input type="button" value="Nuovo Evento" onclick="onNewEventoClick(this)"/>
    <div id="calendar">

    </div>
</div>
@section Header{
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.8.2/fullcalendar.min.css">
}


@section Scripts{
    <script src="~/js/jquery-2.1.3.min.js"></script>
    <script src='~/js/moment.min.js'></script>
    <script src="~/bootstrap/js/bootstrap.min.js"></script>
    <script src="~/materialize/js/materialize.min.js"></script>
    <script src="~/js/menuzord.js"></script>
    <script src="~/js/scripts.js"></script>
    <script src="~/fullcalendar-3.8.2/fullcalendar.min.js"></script>
    <script src="~/fullcalendar-3.8.2/locale/it.js"></script>
    <script>
        function onNewEventoClick(src) {
            alert('Nuovo evento clicked.' + src);
            addEvento(null);
        }

        //date: momentjs
        function addEvento(date) {
            var url = "../eventi/new";
            if (date) {
                url = url + "?date=" + date.format("YYYY-MM-DD") + "&time=" + (date.hasTime() ? date.format("HH:mm") : "");
            } 
            window.open(url, "_self");
        }

        $(document).ready(function () {
            // page is now ready, initialize the calendar...
            $('#calendar').fullCalendar({
                // put your options and callbacks here
                lang: "it",
                weekends: true,
                defaultView: "agendaWeek",
                dayClick: function (date, jsEvent, view) {
                    alert('Clicked on: ' + date.format());
                    alert('Coordinates: ' + jsEvent.pageX + ',' + jsEvent.pageY);
                    alert('Current view: ' + view.name);
                    addEvento(date);
                    // change the day's background color just for fun
                    $(this).css('background-color', 'red');
                },
                eventClick: function (calEvent, jsEvent, view) {
                    alert('Event: ' + calEvent.title);
                    alert('Coordinates: ' + jsEvent.pageX + ',' + jsEvent.pageY);
                    alert('View: ' + view.name);

                    // change the border color just for fun
                    $(this).css('border-color', 'red');
                }
            })
        });
    </script>
}
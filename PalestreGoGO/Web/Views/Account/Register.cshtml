@using Microsoft.Extensions.Options;
@using Web.Configuration;

@model RegistrationViewModel
@inject IOptions<AppConfig> OptionsApplicationConfiguration

@{ 
    Layout = "_LayoutLanding";
}
<section class="section">
    @*banner-6*@
    <div class="container">
        <div class="text-center mb-20">
            <h3 class="section-title text-uppercase">Registra <strong>gratuitamente</strong> la tua struttura</h3>
            @*<p class="section-sub">
                    Compila la form sottostante ed inizia ad utilizzare gratuitamente le fantastiche funzionalità offerte da PalestreGoGo per la gestione
                    delle prenotazioni ai tuoi eventi.
                </p>*@
        </div>

        <div class="row">
            <div class="col-sm-2"></div>
            <div class="col-sm-8">
                <form asp-controller="Account" asp-action="Register" method="POST">
                    <div class="row">
                        <div class="col-sm-6">
                            <div class="input-field">
                                <input type="text" asp-for="Nome" class="validate">
                                <label asp-for="Nome"></label>
                                <span asp-validation-for="Nome"></span>
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="input-field">
                                <input type="text" asp-for="Cognome" class="validate">
                                <label asp-for="Cognome"></label>
                                <span asp-validation-for="Cognome"></span>
                            </div>
                        </div>
                    </div><!-- /.row -->
                    <div class="row">
                        <div class="col-sm-12">
                            <div class="input-field">
                                <input type="email" asp-for="Email" class="validate">
                                <label asp-for="Email"></label>
                                <span asp-validation-for="Email"></span>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-6">
                            <div class="input-field">
                                <input type="password" asp-for="Password" class="validate">
                                <label asp-for="Password">Password</label>
                                <span asp-validation-for="Password"></span>
                            </div>
                        </div><!-- /.col-sm-6 -->
                        <div class="col-sm-6">
                            <div class="input-field">
                                <input type="password" asp-for="PasswordConfirm" class="validate">
                                <label asp-for="PasswordConfirm"></label>
                                <span asp-validation-for="PasswordConfirm"></span>
                            </div>
                        </div><!-- /.col-sm-6 -->
                    </div>
                    <div class="row">
                        <div class="col-sm-12">
                            <div class="input-field">
                                <input type="text" asp-for="NomeStruttura" class="validate">
                                <label asp-for="NomeStruttura"></label>
                                <span asp-validation-for="NomeStruttura"></span>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="input-field col-sm-12">
                            <select asp-for="IdTipologia" asp-items="Model.TipologieClienti" class="active">
                                <option disabled selected>Selezionare un categoria</option>
                            </select>
                            <label id="lblTipologiaCliente" for="IdTipologia" class="customSelectLabel">Tipologia di Struttura</label>
                            <span asp-validation-for="IdTipologia"></span>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-12">
                            <div class="input-field">
                                <input type="text" asp-for="RagioneSociale" class="validate">
                                <label asp-for="RagioneSociale">Ragione Sociale</label>
                                <span asp-validation-for="RagioneSociale"></span>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-12">
                            <div class="input-field">
                                <input type="email" asp-for="EmailStruttura" class="validate">
                                <label asp-for="EmailStruttura">Email Struttura</label>
                                <span asp-validation-for="EmailStruttura"></span>
                            </div>
                        </div>
                    </div><!-- /.row -->
                    <div class="row">
                        <div class="col-sm-12">
                            <div class="input-field">
                                <input id="addressAutocomplete" type="text" asp-for="Indirizzo" class="autocomplete" placeholder="">
                                <label asp-for="Indirizzo"></label>
                                <span asp-validation-for="Indirizzo"></span>
                            </div>
                        </div><!-- /.col-sm-6 -->
                    </div>
                    <div class="row">
                        <div class="col-sm-12">
                            <div class="input-field">
                                <input type="tel" asp-for="Telefono" class="validate">
                                <label asp-for="Telefono"></label>
                                <span asp-validation-for="Telefono"></span>
                            </div>
                        </div><!-- /.col-sm-6 -->
                    </div>
                    <div class="text-center">
                        <button type="submit" name="submit" class="waves-effect waves-light btn submit-button pink mt-30">Registrati</button>
                    </div>
                    <input id="inputLatitudine" type="hidden" asp-for="Latitudine" />
                    <input id="inputLongitudine" type="hidden" asp-for="Longitudine" />
                    <input id="inputCitta" type="hidden" asp-for="Citta" />
                    <input id="inputCountry" type="hidden" asp-for="Country" />
                    <input id="inputCAP" type="hidden" asp-for="CAP" />
                </form>
            </div><!-- /.col-sm-8 -->
            <div class="col-sm-2"></div>
        </div><!-- /.row -->
    </div>

</section>

@section Scripts{
    <!-- jQuery -->
    <script src="~/js/jquery-2.1.3.min.js"></script>
    <script src="~/bootstrap/js/bootstrap.min.js"></script>
    <script src="~/materialize/js/materialize.min.js"></script>
    <script src="~/js/menuzord.js"></script>
    <script src="~/js/autocompleteajax.js"></script>
    @*<script src="~/js/bootstrap-tabcollapse.min.js"></script>*@
    @*<script src="~/js/jquery.easing.min.js"></script>
        <script src="~/js/jquery.sticky.min.js"></script>
        <script src="~/js/smoothscroll.min.js"></script>
        <script src="~/js/jquery.stellar.min.js"></script>
        <script src="~/js/jquery.inview.min.js"></script>
        <script src="~/owl.carousel/owl.carousel.min.js"></script>
        <script src="~/flexSlider/jquery.flexslider-min.js"></script>
        <script src="~/magnific-popup/jquery.magnific-popup.min.js"></script>*@
    @*<script src="https://maps.googleapis.com/maps/api/js"></script>*@
    <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=@OptionsApplicationConfiguration.Value.GoogleAPI.GoogleMapsAPIKey&libraries=places&language=it"></script>
    <script src="~/js/scripts.js"></script>

    <!-- Google Map Customization  -->
    <script type="text/javascript">
        jQuery(document).ready(function () {

            $('select').material_select();

            /// GOOGLE AUTOCOMPLETE ///
            var input = document.getElementById('addressAutocomplete');
            var options = {
                type: ['(address)'],
                componentRestrictions: { country: 'it' }
            };

            autocomplete = new google.maps.places.Autocomplete(input, options);
            autocomplete.addListener('place_changed', function () {
                var place = autocomplete.getPlace();
                document.getElementById('inputLatitudine').value = place.geometry.location.lat();
                document.getElementById('inputLongitudine').value = place.geometry.location.lng();

                var tmp = place.address_components.find(function (c) { return c.types[0] === "postal_code"; });
                if (tmp) {
                    document.getElementById('inputCAP').value = tmp.long_name;
                }
                tmp = place.address_components.find(function (c) { return c.types[0] === "locality"; });
                if (tmp) {
                    document.getElementById('inputCountry').value = tmp.long_name;
                }
                tmp = place.address_components.find(function (c) { return c.types[0] === "administrative_area_level_1"; });
                if (tmp) {
                    document.getElementById('inputCitta').value = tmp.long_name;
                }
            });


            //var $street_select = $('.js-street-select');
            //var $street_preloader = $('.js-street-preloader');
            //var initial_address;

            //function getStreetAutocompleteObject() {
            //    return {
            //        ajax: {
            //            url: $street_select.attr('data-url'),
            //            method: 'post',
            //            dataType: 'json',
            //            //beforeSend: function () {
            //            //    if (!$street_preloader.hasClass('active')) {
            //            //        $street_preloader.addClass('active');
            //            //    }
            //            //},
            //            error: null
            //        },
            //        //callback: function (res) {
            //        //    if ($street_preloader.hasClass('active')) {
            //        //        $street_preloader.removeClass('active');
            //        //    }
            //        //},
            //        minLength: 3,
            //        delay: 200
            //    };
            //}

            //$('#addressAutocomplete').autocompleteajax()
        });
    </script>
    @{ await Html.RenderPartialAsync("_ValidationScriptsPartial"); }

}